# =======================
# ==  Color Variables  ==
# =======================

color_orange="colour208"
color_purple="colour135"
color_green="colour76"
color_blue="colour39"
color_yellow="colour220"
color_red="colour160"
color_black="colour232"
color_white="colour15"
color_grey="colour240"

# ========================
# == Special Characters ==
# ========================

powerline_left=""
powerline_right=""
powerline_connection="⧫"

# ====================
# ==  Theme Colors  ==
# ====================

color_primary="$color_blue"
color_secondary="$color_green"
color_tertiary="$color_purple"
color_dark="$color_grey"
color_light="$color_white"

color_level_ok="$color_green"
color_level_warn="$color_yellow"
color_level_stress="$color_red"

color_session_bg="$color_primary"
color_session_fg="$color_black"

color_user_bg="$color_secondary"
color_user_fg="$color_black"

color_pane_bg="$color_white"
color_pane_fg="$color_black"

color_time_bg="$color_white"
color_time_fg="$color_black"

color_date_bg="$color_primary"
color_date_fg="$color_black"

color_host_bg="$color_tertiary"
color_host_fg="$color_black"

color_status_bg="$color_dark"
color_status_fg="default"

color_window_bg="$color_blue"
color_window_fg="$color_black"

color_current_window_bg="$color_purple"
color_current_window_fg="$color_black"

color_keys_off_bg="$color_red"
color_keys_off_fg="$color_light"

color_message_bg="$color_primary"
color_message_fg="$color_black"

color_mode_bg="$color_secondary"
color_mode_fg="$color_black"

# ===================
# == Theme Formats ==
# ===================

window_format=" #I:#W "

# ====================
# == Status Widgets ==
# ====================

wg_session="#[fg=$color_session_fg,bg=$color_session_bg,bold] #S #[default]"
wg_user="#[fg=$color_user_fg,bg=$color_user_bg] #(whoami) #[default]"
wg_pane="#[fg=$color_pane_fg,bg=$color_pane_bg] #I:#P #[default]"

wg_time="#[fg=$color_time_fg,bg=$color_time_bg] %H:%M:%S #[default]"
wg_date="#[fg=$color_date_fg,bg=$color_date_bg] %Y-%m-%d #[default]"
wg_host="#[fg=$color_host_fg,bg=$color_host_bg,bold] #H #[default]"

wg_keys_off="#[fg=$color_keys_off_fg,bg=$color_keys_off_bg]#([ $(tmux show-option -qv key-table) = 'off' ] && echo 'OFF')#[default]"
wg_is_zoomed="#[fg=$color_dark,bg=$color_secondary]#{?window_zoomed_flag,[Z],}#[default]"
wg_battery="#{battery_color_charge_fg} #{battery_icon} #{battery_percentage}"

# ===================
# == Status Groups ==
# ===================

sg_state="${wg_keys_off} ${wg_is_zoomed}"
sg_host_time="#[fg=$color_time_bg]${powerline_right}${wg_time}#[fg=$color_date_bg,bg=$color_time_bg]${powerline_right}${wg_date}#[fg=$color_host_bg,bg=$color_date_bg]${powerline_right}${wg_host}"

# ==================
# ==  Appearance  ==
# ==================

set -g mode-style "fg=$color_mode_fg,bg=$color_mode_bg"

set -g message-style "fg=$color_message_fg,bg=$color_message_bg"

set -g status on
set -g status-interval 5
set -g status-position top
set -g status-justify centre
set -g status-left-length 40
set -g status-right-length 150
set -g status-style "fg=$color_status_fg,bg=$color_status_bg"

# Status Left: Session > User > Window:Pane
set -g status-left "${wg_session}#[fg=$color_session_bg,bg=$color_user_bg]${powerline_left}${wg_user}#[fg=$color_user_bg,bg=$color_pane_bg]${powerline_left}${wg_pane}#[fg=$color_pane_bg]${powerline_left}"

# Status Right: Time < Date < Host
set -g status-right "#{prefix_highlight} ${sg_state} #{sysstat_cpu} | #{sysstat_mem} | #{sysstat_swap} | #{sysstat_loadavg} #{online_status} ${sg_host_time}${wg_battery}"

# Window Status
set -g window-status-separator " "
set -g window-status-format "$window_format"
set -g window-status-style "fg=$color_window_fg,bg=$color_window_bg,nobold"

set -g window-status-current-format "$window_format"
set -g window-status-current-style "fg=$color_current_window_fg,bg=$color_current_window_bg,bold"
set -g window-status-activity-style "fg=$color_current_window_fg,bg=$color_current_window_bg,bold"

# Pane Border Handles
set -g pane-border-style "fg=$color_light"
set -g pane-active-border-style "fg=$color_primary"

# =======================
# == Plugin Appearance ==
# =======================

# Plugin: tmux-prefix-highlight
set -g @prefix_highlight_output_prefix "["
set -g @prefix_highlight_output_suffix "]"
set -g @prefix_highlight_fg "$color_dark"
set -g @prefix_highlight_bg "$color_secondary"
set -g @prefix_highlight_show_copy_mode "on"
set -g @prefix_highlight_copy_mode_attr "fg=$color_dark,bg=$color_secondary"

# Plugin: tmux-plugin-sysstat
set -g @sysstat_mem_view_tmpl "MEM:#[fg=#{mem.color}]#{mem.pused}#[default] #{mem.used}"

set -g @sysstat_cpu_color_low "$color_level_ok"
set -g @sysstat_cpu_color_medium "$color_level_warn"
set -g @sysstat_cpu_color_stress "$color_level_stress"

set -g @sysstat_mem_color_low "$color_level_ok"
set -g @sysstat_mem_color_medium "$color_level_warn"
set -g @sysstat_mem_color_stress "$color_level_stress"

set -g @sysstat_swap_color_low "$color_level_ok"
set -g @sysstat_swap_color_medium "$color_level_warn"
set -g @sysstat_swap_color_stress "$color_level_stress"

# Plugin: tmux-battery
set -g @batt_color_charge_primary_tier8 "$color_level_ok"
set -g @batt_color_charge_primary_tier7 "$color_level_ok"
set -g @batt_color_charge_primary_tier6 "$color_level_warn"
set -g @batt_color_charge_primary_tier5 "$color_level_warn"
set -g @batt_color_charge_primary_tier4 "$color_level_warn"
set -g @batt_color_charge_primary_tier3 "$color_level_stress"
set -g @batt_color_charge_primary_tier2 "$color_level_stress"
set -g @batt_color_charge_primary_tier1 "$color_level_stress"

# Plugin: tmux-online-status
set -g @online_icon "#[fg=$color_level_ok,bold]${powerline_connection}#[default]"
set -g @offline_icon "#[fg=$color_level_stress,bold]${powerline_connection}#[default]"
